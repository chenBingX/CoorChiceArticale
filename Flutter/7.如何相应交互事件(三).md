[![](https://raw.githubusercontent.com/chenBingX/img/master/Flutter/Flutterå¿«é€Ÿä¸Šæ‰‹æŒ‡å—å°é¢2.JPG)](https://juejin.im/post/5c8f8e62e51d456a0f23d0fe)

[**ç›®å½•ä¼ é€é—¨ï¼š**ã€ŠFlutterå¿«é€Ÿä¸Šæ‰‹æŒ‡å—ã€‹å…ˆå¯¼ç¯‡](https://juejin.im/post/5c8f8e62e51d456a0f23d0fe)


é™¤äº† **GestureDetector**ï¼ŒFlutter è¿˜æä¾›äº† **Listener** æ¥ç›‘å¬è§¦æ‘¸äº‹ä»¶ã€‚

å®ƒä¹Ÿæ˜¯ä¸€ä¸ª Widgetï¼Œä½¿ç”¨å®ƒåŒ…è£¹ä¸€ä¸ª Widgetï¼Œå°±èƒ½èƒ½å¤Ÿå¤„ç†è¯¥ Widget ä¸Šå‘ç”Ÿçš„è§¦æ‘¸äº‹ä»¶ã€‚
  

# 1. Listener çš„å¸¸ç”¨å±æ€§

çœ‹çœ‹é€šè¿‡ **Listener** å¯ä»¥å¤„ç†å“ªäº›äº‹ä»¶ï¼š

|å±æ€§|ç±»å‹|è¯´æ˜|
|---|---|---|
|onPointerDown|(PointerDownEvent event){}|æŒ‰ä¸‹æ—¶è§¦å‘|
|onPointerMove|(PointerDownEvent event){}|ç§»åŠ¨æ—¶è§¦å‘|
|onPointerEnter|(PointerDownEvent event){}|è¿›å…¥WidgetåŒºåŸŸæ—¶è§¦å‘|
|onPointerExit|(PointerDownEvent event){}|ç¦»å¼€WidgetåŒºåŸŸæ—¶è§¦å‘|
|onPointerUp|(PointerDownEvent event){}|ç¦»å¼€å±å¹•æ—¶è§¦å‘|
|onPointerDown|(PointerDownEvent event){}|æŒ‰ä¸‹æ—¶è§¦å‘|
|onPointerCancel|(PointerDownEvent event){}|å–æ¶ˆè§¦æ‘¸æ—¶è§¦å‘|
|behavior|HitTestBehavior|æ§åˆ¶äº‹ä»¶ä¼ é€’ã€‚è¿™ä¸ªä¸‹é¢å†è¯´æ˜|

## 1.1 Listener çš„ä½¿ç”¨

å…ˆçœ‹çœ‹ä¾‹å­ğŸŒ°ï¼š

```
Listener(
  onPointerUp: (e){
    Navigator.pop(context);
  },
  child: Container(
    height: 80,
    color: Colors.blue,
    alignment: Alignment.center,
    child: Text(
      text,
      style: TextStyle(
          color: Colors.white, decoration: TextDecoration.none),
    ),
  ),
)
```

è¿˜æ˜¯é‚£å¥—ç”¨æ³•ï¼Œä½¿ç”¨å®ƒå»åŒ…è£¹è¦å¤„ç†äº‹ä»¶çš„ Widget èŠ‚ç‚¹ï¼Œå°±ç›¸å½“äºä½¿èŠ‚ç‚¹è·å¾—å¤„ç†äº‹ä»¶çš„èƒ½åŠ›ã€‚

## 1.2 HitTestBehavior

HitTestBehavior ç”¨äºæ§åˆ¶äº‹ä»¶çš„ä¼ é€’æ–¹å¼ã€‚  

- HitTestBehavior.deferToChild
    
    åªæœ‰æœ‰å­ Widget é€šè¿‡äº† Hit-Testï¼Œæ‰æ¥æ”¶ä¸€ç³»åˆ—çš„äº‹ä»¶ï¼Œæ¥æ”¶åŒºåŸŸä¹Ÿä¼šè¢«é™åˆ¶åœ¨è¯¥å­ Widget åŒºåŸŸä¸­ã€‚  
    
- HitTestBehavior.opaque
    
    Widget èƒ½å¤Ÿé€šè¿‡ Hit-Testï¼Œæ¥æ”¶äº‹ä»¶ï¼Œä¸”èƒ½é˜»æ­¢åœ¨å®ƒä¹‹å‰çš„ Widgetï¼ˆç›´è§‚æ¥çœ‹å°±æ˜¯è¢«å®ƒæŒ¡ä½çš„ Widgetï¼‰æ¥æ”¶äº‹ä»¶ã€‚

    ç®€å•æ¥è¯´å°±æ˜¯äº‹ä»¶ **ä¸èƒ½é€ä¼ **ã€‚
    
- HitTestBehavior.translucent
    
     Widget èƒ½å¤Ÿé€šè¿‡ Hit-Testï¼Œæ¥æ”¶äº‹ä»¶ï¼Œä¸”ä¸ä¼šé˜»æ­¢å®ƒä¹‹å‰çš„ Widgetï¼ˆç›´è§‚æ¥çœ‹å°±æ˜¯è¢«å®ƒæŒ¡ä½çš„ Widgetï¼‰æ¥æ”¶äº‹ä»¶ã€‚

     ç®€å•æ¥è¯´å°±æ˜¯äº‹ä»¶ **èƒ½é€ä¼ **ã€‚


## 1.3 PointerEvent

PointerEvent æ˜¯ Listener å›è°ƒä¸­çš„å‚æ•°ï¼Œå‚¨å­˜äº†ä¸€ç³»åˆ—çš„è§¦æ‘¸ä¿¡æ¯ã€‚  

çœ‹çœ‹ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„å±æ€§ï¼š   

|å±æ€§|ç±»å‹|è¯´æ˜|
|---|---|---|
|pointer|int|æ ‡ç¤ºä¸€æ¬¡è§¦æ‘¸idã€‚é‡æ–°è§¦æ‘¸ä¼šåˆ†é…æ–°çš„å€¼|
|kind|PointerDeviceKind|è§¦æ‘¸äº‹ä»¶çš„è¾“å…¥ç±»å‹ã€‚æ˜¯è§¦æ‘¸ï¼Œè¿˜æ˜¯é¼ æ ‡..|
|position|Offset|å½“å‰åæ ‡ã€‚ç›¸å¯¹äºå…¨å±€åæ ‡|
|delta|Offset|æŒ‡é’ˆç§»åŠ¨æœŸé—´ï¼Œä¸ä¸Šä¸€æ¬¡äº‹ä»¶çš„ç§»åŠ¨è·ç¦»|
|pressure|double|æŒ‰å‹åŠ›åº¦ã€‚å–å€¼èŒƒå›´ 0.0-1.0|

# 2.ä¸æ¥æ”¶è§¦æ‘¸äº‹ä»¶ - IgnorePointer

å¦‚æœä¸æƒ³è®©ä¸€ä¸ª Widget æ¥æ”¶è§¦æ‘¸äº‹ä»¶ï¼Œé‚£å°±ç”¨ IgnorePointer åŒ…è£¹å®ƒå¥½äº†ã€‚  

```
IgnorePointer(
   ignoring: true,
   child: MyWidget(),
)
```

ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œignoring æ§åˆ¶æ˜¯å¦å¿½ç•¥ï¼Œé»˜è®¤ä¸º trueã€‚


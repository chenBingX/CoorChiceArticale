[![](https://raw.githubusercontent.com/chenBingX/img/master/Flutter/Flutterå¿«é€Ÿä¸Šæ‰‹æŒ‡å—å°é¢2.JPG)](https://juejin.im/post/5c8f8e62e51d456a0f23d0fe)

[**ç›®å½•ä¼ é€é—¨ï¼š**ã€ŠFlutterå¿«é€Ÿä¸Šæ‰‹æŒ‡å—ã€‹å…ˆå¯¼ç¯‡](https://juejin.im/post/5c8f8e62e51d456a0f23d0fe)

æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ Flutter ä¸­å¦‚ä½•å¤„ç†ç‚¹å‡»ã€é•¿æŒ‰ç­‰æ‰‹åŠ¿äº¤äº’å‘¢ ğŸ¤” ï¼Ÿ

äº‹å®ä¸Šï¼ŒFlutter æä¾›äº†å¤šç§å¤„ç†æ‰‹åŠ¿äº¤äº’çš„æ–¹æ¡ˆï¼Œæœ¬ç¯‡æ–‡ç« ä»‹ç»ä¸€ç§æ¯”è¾ƒé€šç”¨å’Œå…¨èƒ½çš„æ–¹æ¡ˆï¼š **GestureDetector**ã€‚

ä½¿ç”¨ **GestureDetector** å¯ä»¥è·å¾—å„ç§ç±»å‹çš„ç‚¹å‡»äº‹ä»¶å›è°ƒï¼Œå› æ­¤ä½ å¯ä»¥åˆ›å»ºå‡ºèƒ½å¤Ÿå¤„ç†å„ç§ç‚¹å‡»äº‹ä»¶çš„ Widget æ¥ã€‚
  
# 1.GestureDetector å¸¸ç”¨æ‰‹åŠ¿

ç°åœ¨ï¼Œçœ‹çœ‹ **GestureDetector** æœ‰äº›ä»€ä¹ˆå¸¸ç”¨çš„äº¤äº’äº‹ä»¶å§ï¼š

- onTapï¼šå•å‡»

- onDoubleTapï¼šåŒå‡»

- onLongPressï¼šé•¿æŒ‰

- onTapUpï¼šæ‰‹æŒ‡æŠ¬èµ·æ¥æ—¶

- onTapDownï¼šæ‰‹æŒ‡è§¦ç¢°å±å¹•æ—¶

- onTapCancelï¼šç‚¹å‡»æ²¡æœ‰å®Œæˆ

- onVerticalDragDownï¼šæ‰‹æŒ‡åˆšæ¥è§¦å±å¹•æ—¶ï¼Œéšåå¼€å§‹å‚ç›´æ–¹å‘ä¸Šçš„æ‹–åŠ¨

- onVerticalDragStartï¼šå‚ç›´æ–¹å‘ä¸Šçš„æ‹–åŠ¨å¼€å§‹æ—¶ 

- onVerticalDragUpdateï¼šå‚ç›´æ–¹å‘ä¸Šçš„æ‹–åŠ¨æ›´æ–°æ—¶

- onVerticalDragEndï¼šå‚ç›´æ–¹å‘ä¸Šçš„æ‹–åŠ¨ç»“æŸæ—¶   

- onVerticalDragCancelï¼šå‚ç›´æ‹–åŠ¨æ²¡æœ‰å®Œæˆ

- onHorizontallyDragDownï¼šæ‰‹æŒ‡åˆšæ¥è§¦å±å¹•æ—¶ï¼Œéšåå¼€å§‹æ°´å¹³æ–¹å‘ä¸Šçš„æ‹–åŠ¨

- onHorizontallyDragStartï¼šæ°´å¹³æ–¹å‘ä¸Šçš„æ‹–åŠ¨å¼€å§‹æ—¶ 

- onHorizontallyDragUpdateï¼šæ°´å¹³æ–¹å‘ä¸Šçš„æ‹–åŠ¨æ›´æ–°æ—¶

- onHorizontallyDragEndï¼šæ°´å¹³æ–¹å‘ä¸Šçš„æ‹–åŠ¨ç»“æŸæ—¶   

- onHorizontallyDragCancelï¼šæ°´å¹³æ‹–åŠ¨æ²¡æœ‰å®Œæˆ

- onScaleStartï¼šå¼€å§‹ç¼©æ”¾æ—¶ï¼Œåˆå§‹ scale ä¸º 1.0

- onScaleUpdateï¼šç¼©æ”¾æ›´æ–°æ—¶

- onScaleEndï¼šç¼©æ”¾ç»“æŸ

- onPanDownï¼šæ‰‹æŒ‡è§¦æ‘¸å±å¹•æ—¶

- onPanUpdateï¼šæ‰‹æŒ‡ç§»åŠ¨æ—¶

- onPanEndï¼šæ»‘åŠ¨ç»“æŸæ—¶

# 2.å¦‚ä½•ä½¿ç”¨ GestureDetector

1. ä½¿ç”¨ **GestureDetector** åˆ›å»ºä¸€ä¸ªå¯äº¤äº’çš„ Widgetã€‚  
    
    ```
    class TapBox extends StatefulWidget {
    
      final bool active;
      // å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¤–ç•Œä¼ å…¥åå¯è¢«è°ƒç”¨
      final ValueChanged<bool> onChanged;
    
      TapBox({Key key, this.active, this.onChanged}) : super(key: key);
    
      @override
      State<StatefulWidget> createState() {
        return _TabBox();
      }
    }
    
    class _TabBox extends State<TapBox> {
      bool _highlight = false;
    
      void _handleTapDown(TapDownDetails details) {
        setState(() {
          _highlight = true;
        });
      }
    
      void _handleTapUp(TapUpDetails details) {
        setState(() {
          _highlight = false;
        });
      }
    
      void _handleTapCancel() {
        setState(() {
          _highlight = false;
        });
      }
    
      void _handleTap() {
        // é€šè¿‡ widget å¯ä»¥è·å¾—å…¶æˆå‘˜å˜é‡
        widget.onChanged(!widget.active);
      }
    
      Widget build(BuildContext context) {
        // æŠŠä½ çš„ Widget ä½¿ç”¨ GestureDetector åŒ…è£¹ğŸ“¦èµ·æ¥
        return GestureDetector(
          // å¤„ç†æŒ‰ä¸‹æ‰‹åŠ¿
          onTapDown: _handleTapDown,
          // å¤„ç†æŠ¬èµ·æ‰‹åŠ¿
          onTapUp: _handleTapUp,
          // å¤„ç†ç‚¹å‡»æ‰‹åŠ¿
          onTap: _handleTap,
          // å¤„ç†å–æ¶ˆæ‰‹åŠ¿
          onTapCancel: _handleTapCancel,
          child: Container(
            child: Center(
              child: Text(widget.active ? 'Active' : 'Inactive',
                  style: TextStyle(fontSize: 32.0, color: Colors.white)),
            ),
            width: 200.0,
            height: 200.0,
            decoration: BoxDecoration(
              color: widget.active ? Colors.lightGreen[700] : Colors.grey[600],
              border: _highlight
                  ? Border.all(
                      color: Colors.teal[700],
                      width: 10.0,
                    )
                  : null,
            ),
          ),
        );
      }
    }
    ```

    ä½ çœ‹ï¼ŒGestureDetector ä¹Ÿæ˜¯ä¸€ä¸ª Widgetï¼Œé€šè¿‡ä½¿ç”¨å®ƒæ¥åŒ…è£¹ç›®æ ‡ Widgetï¼Œå°±ä½¿å¾—ç›®æ ‡ Widget å…·æœ‰å¤„ç†äº‹ä»¶çš„èƒ½åŠ›ã€‚

2. ä½¿ç”¨è¿™ä¸ª Widgetã€‚  
    
    
   ```
   class ParentWidget extends StatefulWidget {
     @override
     State<StatefulWidget> createState() {
       return _ParentWidget();
     }
   }
   
   class _ParentWidget extends State<ParentWidget> {
     bool _active = false;
   
     void _handleTapBoxChanged(bool newValue) {
       setState(() {
         _active = newValue;
       });
     }
   
     @override
     Widget build(BuildContext context) {
       return Container(
         child: TapBox(
           active: _active,
           // ä¼ å…¥å‡½æ•°
           onChanged: _handleTapBoxChanged,
         ),
       );
     }
   }
   ```
   
    è¿è¡Œæ•ˆæœï¼š

    ![](https://raw.githubusercontent.com/chenBingX/img/master/Flutter/Flutter-demo9.gif)

